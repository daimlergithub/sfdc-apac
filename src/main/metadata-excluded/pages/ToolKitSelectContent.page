<apex:page standardcontroller="Tool_Kit__c" extensions="ToolKitSelectContentController" tabStyle="ContentVersion" cache="false" sidebar="false" showheader="false">
    <script type="text/javascript">
        function closeTab() {
           var toolkitid = "{!$CurrentPage.parameters.toolkitId}";
           window.location.href = '/' + toolkitid;
        }
    </script>

    <apex:form id="toolKitContentForm">
        <apex:pageBlock title="">
            <apex:pageBlockSection title="{!$Label.Title_Search_Filters}" columns="2">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.VF_ToolkitSelect_File_Name}"/>
                    <apex:inputField value="{!contentVersion.PathOnClient}"/>
                </apex:pageBlockSectionItem>
                <apex:inputField value="{!contentVersion.Title}" required="false"/>
                <apex:inputField value="{!contentVersion.Brand__c}"/>
                <apex:inputField value="{!contentVersion.CBU_PbP__c}"/>
                <apex:inputField value="{!contentVersion.Class__c}"/>
                <apex:inputField value="{!contentVersion.Media_Type__c}" rendered="{!toolkitInfo.RecordType.Name == 'Media'}"/>
                <apex:inputField value="{!contentVersion.Event_Type__c}" rendered="{!toolkitInfo.RecordType.Name != 'Media'}"/>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.VF_ToolkitSelect_Publish_Date}"/>
                    <apex:inputField value="{!contentVersion.Due_Date__c}"/>
                </apex:pageBlockSectionItem>
                <apex:inputField value="{!contentVersion.Ad_Type__c}" rendered="{!toolkitInfo.RecordType.Name == 'Media'}"/>
                <apex:inputField value="{!contentVersion.Event_Tool_Kit__c}" rendered="{!toolkitInfo.RecordType.Name != 'Media'}"/>
                <center><apex:outputPanel >
                    <apex:commandButton action="{!query}" value="{!$Label.Button_Search}" id="selectButton" reRender="toolKitContentForm" status="status"/>&nbsp;&nbsp;
                    <apex:commandButton value="{!$Label.VF_ToolKitSelect_Return_Button}" oncomplete="closeTab();"/>
                </apex:outputPanel></center>
                <apex:actionStatus id="status">
                    <apex:facet name="start">
                        <span style="width: 500px;">
                            <img src="/img/loading24.gif" style="vertical-align:middle;"/>
                            <span style="margin-left: 10px; font-size: 12px; font-weight: bold; color: #000000;">{!$Label.CP_Please_Wait}...</span>
                        </span>
                    </apex:facet>
                </apex:actionStatus>
            </apex:pageBlockSection>
            <apex:pageBlockSection title="{!$Label.Title_Search_Results}" rendered="{!hasQueryResult}" id="contentListBlock" columns="1">
                <apex:pageBlockTable value="{!contentListToShow}" var="content" width="100%">
                    <apex:column headerValue="{!$Label.VF_ToolkitSelect_File_Name}" width="10%">
                        <apex:commandLink action="{!choose}" value="{!content.PathOnClient}"  oncomplete="closeTab();">
                            <apex:param assignTo="{!choosenContentName}" value="{!content.id}" name="choosenContentName"/>
                            <apex:param assignTo="{!ContentName}" value="{!content.PathOnClient}" name="ContentName"/>
                        </apex:commandLink>
                    </apex:column>
                    <apex:column width="20%" value="{!content.title}"/>
                    <apex:column width="5%" value="{!content.Brand__c}"/>
                    <apex:column width="5%" value="{!content.Class__c}"/>
                    <apex:column width="5%" value="{!content.CBU_PbP__c}"/>
                    <apex:column width="5%" value="{!content.Media_Type__c}"/>
                    <apex:column width="5%" value="{!content.Ad_Type__c}" />
                    <apex:column width="5%" value="{!content.Ad_Num__c}" />
                    <apex:column width="5%" value="{!content.Event_Type__c}" />
                    <apex:column width="5%" value="{!content.Event_Num__c}" />
                    <apex:column width="5%" value="{!content.Event_Tool_Kit__c}" />
                    <apex:column width="15%" headerValue="{!$Label.VF_ToolkitSelect_Preview}">
                        <apex:image url="/sfc/servlet.shepherd/version/download/{!content.Id}" height="100" width="150"/>
                    </apex:column>
                    <apex:column headerValue="{!$Label.VF_ToolkitSelect_Publish_Date}" width="5%">
                        <apex:outputField value="{!content.lastmodifieddate}"/>
                    </apex:column>
                    <apex:column width="5%" value="{!content.Document_Type__c}"/>
                </apex:pageBlockTable>
                <apex:outputPanel id="paginatioPanel">
                    <table width="100%" cellspacing="5">
                        <tr>
                            <td width="50%" style="text-align:left"><apex:outputLabel value="{!recordNumbering}" /></td>
                            <td width="50%" style="text-align:right;">
                                <apex:outputPanel rendered="{!hasPrev}">
                                    <apex:commandLink value="<<" action="{!first}" reRender="contentListBlock"  style="text-decoration:none;"/>&nbsp;  &nbsp;
                                    <apex:commandLink value="{!$Label.Page_Element_Previous}" action="{!previous}" reRender="contentListBlock"/>&nbsp;  &nbsp;
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!hasNext}">
                                    <apex:commandLink value="{!$Label.Page_Element_Next}" action="{!next}" reRender="contentListBlock" />&nbsp;  &nbsp;
                                    <apex:commandLink value=">>" action="{!last}" reRender="contentListBlock" style="text-decoration:none;"/>
                                </apex:outputPanel>
                            </td>
                        </tr>
                    </table>
                </apex:outputPanel>
            </apex:pageBlockSection>
            <apex:pageMessages Id="message"/>
        </apex:pageBlock>
    </apex:form>
</apex:page>
<!----------------------------------------------------------------------------------
     lastModifedBy :Lokesh 
     modifiedDate  : 23 May, 2017
     JIRA          : SFDCJP-2000, SFDCJP-2101, SFDCJP-2519
----------------------------------------------------------------------------------->

<apex:page standardController="Vehicle__c" extensions="SendToMyMercController">
 <script type="text/javascript">
   function CustAlrtMsg()
   {
   var valu=document.getElementById('j_id0:j_id2:blc:j_id50:tab:0:inptid').value
    
    if(valu == '')
  {

  if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}'));
  
   
    }
 
  else if(valu != '')
  {
    if(!confirm('{!$Label.Did_You_Get_Agreement_From_Customer}'));
    {  return false;}
  
   
  }
   }
   

</script>
    <apex:form >
        <apex:pageMessages ></apex:pageMessages>
        <apex:pageblock title="{!$Label.Customer_My_Merc_Interface_Customer}" id="blc">
             <apex:OutputLabel > {!$Label.Please_set_all_information_received_from_a_customer} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Mobile_is_a_mandatory_for_Concierge_Service} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.What_information_a_user_can_use_for_login_will_depend_on_input_information} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Email_A_customer_will_be_able_to_use_the_email_for_login} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Mobile_A_customer_will_be_able_to_use_the_mobile_for_login} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Email_Mobile_A_customer_will_be_able_to_use_the_mobile_for_login} </apex:OutputLabel> <br/><br/>
                                                            
            <apex:pageBlockButtons location="bottom">
      <apex:commandButton action="{!Submit}" value="{!$Label.Send_Information}"  Onclick="if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}')){return false};"/>  
      <apex:commandButton action="{!cancel}" value="{!$Label.Cancel}"/>
            </apex:pageBlockButtons>
            <apex:pageblocksection title="{!$Label.Select_Your_Prefered_Email_Id_For_Customer}" columns="1">   
            <apex:pageBlockTable value="{!lstAccountWrapper}" var="eachWrap" id="tab">
                    <apex:column headerValue="" >
                        <apex:inputCheckbox value="{!eachWrap.isSelect}"/>
                    </apex:column>
                    <apex:column headerValue="{!$Label.AccountName}" value="{!eachWrap.accountData}">
                    </apex:column>
                    <apex:column headerValue="{!$Label.My_Merc_Id}" >
                        <apex:outputtext value="{!eachWrap.vehicleRelationship}"/>
                    </apex:column>
                    <apex:column headerValue="{!$Label.Car_Relation}"  value="{!eachWrap.CarRelation}"/>
                    <apex:column headerValue="{!$Label.My_Merc_Email_Id}"  >
                       <apex:inputText value="{!eachWrap.PortalEmail}" ID="txtName" rendered="{!IF(eachWrap.vehicleRelationship == null, true, false)}"/>
                      <apex:outputText value="{!eachWrap.PortalEmail}" ID="txtName1" rendered="{!IF(eachWrap.vehicleRelationship != null, true, false)}"/>
                    </apex:column>
                      <apex:column headerValue="{!$Label.Login_Mobile}">
                        <apex:inputText id="inptid" value="{!eachWrap.loginmobile}" rendered="{!IF(eachWrap.vehicleRelationship == null, true, false)}"/>
                        <apex:outputText value="{!mobile3}" rendered="{!IF(eachWrap.vehicleRelationship != null, true, false)}" />
                        </apex:column> 
                    <apex:column >
                   <apex:commandLink value="{!$Label.Emails}" action="{!showPopup}" reRender="one">
                        <apex:param name="recordID" value="{!eachWrap.VID}"/>
                    </apex:commandLink>
                    </apex:column>
                    <apex:column headerValue="{!$Label.Reason}">
                        <apex:inputText value="{!eachWrap.OptOutReason}"/>
                    </apex:column>
                   <!--commenting as per sfdcjp-2519 apex:column headerValue="Visible in MyMercedes">
                    apex:inputCheckbox value="{!eachWrap.isVisible}"/>
                    /apex:column>-->
                </apex:pageBlockTable>
                <apex:outputPanel id="one">
                    <apex:repeat value="{!lstVinfo}" var="eachWrap">
                       <apex:outputPanel id="popup">
                          <apex:outputPanel styleClass="popupBg" layout="block" rendered="{!displayPopUp}"/>
                            <apex:outputPanel styleClass="popup" layout="block" rendered="{!displayPopUp}">
                               <apex:pageblockSection columns="1" >
                                 <table width="100%">
                                    <tr><td width="25">
                                        <apex:outputtext value="{!eachWrap.Contact__r.Email__c}" label="{!$Label.Email}" />
                                    </td></tr>
                                    <tr><td width="25"><!--3-->
                                         <apex:outputtext value="{!eachWrap.Contact__r.Email2__c}" label="{!$Label.Email2}" />
                                    </td></tr>
                                </table>
                                </apex:pageblockSection>
                                <apex:commandButton value="{!$Label.CloseMym}" action="{!closePopup}" rerender="one"/>                              
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </apex:repeat>
                </apex:outputPanel>
            </apex:pageblocksection>
        </apex:pageblock>        
    </apex:form>

<style type="text/css">

        .popup
        {
            background-color: white;
            border-width: 2px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            padding:10px;
            position: absolute;
            width: 500px;
            margin-left: -250px;
            top:80px;
        }

        .popupBg
        {
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 70);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }

</style>

</apex:page>
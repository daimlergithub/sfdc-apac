<apex:page standardController="Lead__c" extensions="LeadMergeController" sidebar="false" showHeader="false">
    <style>
        .rollup td {
        padding: 5px;
        height:15px;
        text-align: left;
        valign: middle;
        border-bottom: 1px solid #BBB;
        }
        
        .headerRow td {
        padding-left:10px;
        font-weight:bold;
        }
        
        a {
        color: #015BA7;
        text-decoration: none;
        }
        
        body a:hover {
        text-decoration: underline;
        color: #015BA7;
        }
    </style>
    
    <apex:includeScript value="{!$Resource.jquery142}"/>
    <script>
    jquery = jQuery.noConflict();
    jquery(document).ready(function() {
    //alert('hi');

        
        jquery('input[name*="Dealer_Lead_Status__c"]').hide(); 
        jquery(':radio').change(function() {
            var name = jquery(this).attr('name');
            jquery('input[name=' + name + ']').each(function() {
                jquery(this).next().val(jquery(this).attr('checked'));
            });
        });
      <!--  jquery(':radio').change(function() {
            var name = jquery(this).attr('name');
            
            jquery('input[name=' + name + ']').each(function() {
                jquery(this).next().val(jquery(this).attr('checked'));
            });
        });-->
    });
    
    function setEntityValues (conid) {
        for (var frm = 0; frm < document.forms.length; frm++) {
            for (var fld = 0; fld < document.forms[frm].elements.length; fld++) {
                var elt = document.forms[frm].elements[fld];
                if (elt.type == "radio") {
               // alert(elt.value+'..'+conid);
                    if (elt.value == conid) {
                        elt.checked = true;
                    }
                }
            }
        }
    }
    </script>
    
    <script>
        function assignValue(input, hidden){
          
            document.getElementById(hidden).value = input.value;
          //  alert(document.getElementById(hidden).value);
        }
    </script>
    
    <apex:includeScript value="{!$Resource.jquery142}"/>
    <script>
    jquery = jQuery.noConflict();
    jquery(document).ready(function() {
    jquery('input[name*="Dealer_Lead_Status__c"]').hide(); 
    jquery('input[name*="Contact__c"]').hide(); 
    jquery('input[name*="Service_Advisor__c"]').hide(); 
    jquery('input[name*="RecordTypeId"]').hide(); 
    jquery('input[name*="AfterSales_VIN__c"]').hide(); 
    jquery('input[name*="Lead_Latest_Phase__c"]').hide(); 
    jquery('input[name*="Lead_Possibility__c"]').hide(); 
    jquery('input[name*="Lead_Possibility_text__c"]').hide(); 
    jquery('input[name*="Existing_Contract__c"]').hide(); 
    jquery('input[name*="Existing_Contract_No__c"]').hide(); 
    jquery('input[name*="Customer_Intention__c"]').hide(); 
    jquery('input[name*="Finance_Closing_Option__c"]').hide(); 
    jquery('input[name*="Finance_Closing_Reason__c"]').hide(); 
    jquery('input[name*="DMS_Sent_Flag__c"]').hide(); 
    jquery('input[name*="Quotation_Number_History__c"]').hide(); 
    jquery('input[name*="Order_Confirmation_Date__c"]').hide(); 
    jquery('input[name*="Network_Registration_Date__c"]').hide(); 
    jquery('input[name*="LastModifiedById"]').hide(); 
    
        jquery(':radio').change(function() {
            var name = jquery(this).attr('name');
            jquery('input[name=' + name + ']').each(function() {
                jquery(this).next().val(jquery(this).attr('checked'));
            });
        });
    });
    
    function setEntityValues (conid) {
        for (var frm = 0; frm < document.forms.length; frm++) {
            for (var fld = 0; fld < document.forms[frm].elements.length; fld++) {
                var elt = document.forms[frm].elements[fld];
                if (elt.type == "radio") {
                    if (elt.value == conid) {
                        elt.checked = true;
                    }
                }
            }
        }
    }
    </script>
    
    
    <apex:sectionHeader title="{!$Label.Leadmerge}" subtitle="{!$Label.Master_Account}: {!master.Name}"/>
     <apex:outputText value=" {!$Label.Leadmergeupdated}" escape="false" /> 
    <apex:form id="Formaid">
        <apex:pageBlock >
            <apex:pageMessages Id="message"/>            
            <apex:pageBlockButtons >
                <apex:commandButton value="{!$Label.Previous}" action="{!previous}" immediate="true"/>              
                <apex:commandButton action="{!mergeLead}" value="{!$Label.Merge}" Id="save" 
                                    onclick="if (confirm('{!$Label.CP_Merge_Account_Confirm}')) return true; return false;"/>
            </apex:pageBlockButtons>     
 
            <apex:pageBlock title="{!$Label.Please_Select_only_one_as_a_Master}">
            <apex:actionRegion >
              
             <apex:pageblockTable value="{!leads}" var="slave1" styleclass="compare_table" id="a" title="Please select Master" columns="2"> 
             <apex:column headerClass="Please select" >
             
              <input type="radio" name="Letters" value="{!leads}"  checked="True" >{!master.Name}
                <apex:actionSupport event="onclick" action="{!getSelectedMaster}"  rerender="detail">
                    <apex:param name="idselecteds" value="{!leads.Id}" assignTo="{!isMasterSelected}"/>   
                     </apex:actionSupport>
                </input> 
               </apex:column>
              <apex:column headerClass="Please select" >
              <apex:outputPanel rendered="{!!SelectmasterHide}"> 
               <input type="radio" name="tLetters" value="{!selectedslavelead}"  >{!slave.Name}
          <apex:actionSupport event="onclick" action="{!getSelected}"  rerender="detail">
                    <apex:param name="idselected" value="{!selectedslavelead.id}" assignTo="{!isSlaveSelected}"/>   
                    </apex:actionSupport>
                </input>       
        </apex:outputPanel>                 
             </apex:column> 
             <apex:inputHidden value="{!radioHidden}" id="hidValId" />
             </apex:pageblockTable>
           <!--   </apex:pageBlockSection> -->
         
           </apex:actionRegion>
              </apex:pageBlock>
              
            <apex:outputpanel Id="detail">
                <table cellspacing="0" cellpadding="0" width="80%" align="center" class="rollup" style="margin-left:20px">
                    <tbody>
                        <tr class="headerRow">
                            <apex:actionFunction name="selectAll" action="{!selectAll}" reRender="detail,message">
                                <apex:param assignTo="{!selectAllParam}" name="selectAllParam" value=""/>
                            </apex:actionFunction>
                            <td style="width:20%"></td>
                            <td style="width:40%">
                                <apex:outputLink target="_blank" value="/{!masterids}">{!master.Name}
                                </apex:outputLink> 
                                <a href="javascript:setEntityValues('master'); selectAll('master');">{!$Label.Select_All}</a>
                            </td>
                            
                            <td style="width:40%">
                                <apex:outputLink target="_blank" value="/{!slaveids}">{!slave.Name}
                                </apex:outputLink>  
                                <a href="javascript:setEntityValues('{!$Label.slave}'); selectAll('{!$Label.slave}');">{!$Label.Select_All}</a>
                            </td>
                      </tr>  
                        
                        <apex:repeat var="wrap" value="{!wraps}">
                            <tr onmouseover="if (window.hiOn){hiOn(this);}" onmouseout="if (window.hiOff){hiOff(this);}" 
                                onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}">
                                
                                <td style="text-align:right; width:20%; background-color: {!IF(wrap.isSame,  '#EEEEEE', '#C2E4FE')};">
                                    <b>{!wrap.fieldLabel}</b>
                                </td>
                          
                                   <td style="width:40%">
                                 
                                   <apex:outputField value="{!master[wrap.fieldAPI]}" />                                  
                                   <apex:outputPanel rendered="{!NOT(wrap.isMasterNull) && Not(wrap.isSame)}">
                                          <apex:outputpanel rendered="{!wrap.isMasterChecked}">
                                                <input type="radio" name="{!wrap.fieldAPI}" checked="checked" value="master"/>
                                                <apex:inputHidden value="{!wrap.isMasterChecked}" />
                                          </apex:outputpanel>
                                          
                                          <apex:outputpanel rendered="{!!wrap.isMasterChecked}">
                                           <input type="radio" name="{!wrap.fieldAPI}" value="master"/>
                                          <apex:inputHidden value="{!wrap.isMasterChecked}" /> 
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                 </td>
                                      
                           <td style="width:40%">
                                 
                                  <apex:outputField value="{!slave[wrap.fieldAPI]}"/>                                
                                    <apex:outputPanel rendered="{!NOT(wrap.isSlaveNull) && NOT(wrap.isSame)}">
                                        <apex:outputpanel rendered="{!wrap.isSlaveChecked}">
                                          <input type="radio" name="{!wrap.fieldAPI}" checked="checked" value="slave"/>
                                          <apex:inputHidden value="{!wrap.isSlaveChecked}" />
                                          
                                        </apex:outputpanel>
                                        <apex:outputpanel rendered="{!!wrap.isSlaveChecked}">
                                           <input type="radio" name="{!wrap.fieldAPI}" value="slave" />
                                          <apex:inputHidden value="{!wrap.isSlaveChecked}" /> 
                                        </apex:outputPanel>
                                        
                                    </apex:outputpanel>
                                   
                                   <!-- <apex:outputpanel rendered="{!NOT(wrap.isSlaveNull) && NOT(wrap.isSame) && NOT(wrap.isMasterChecked)}">
                                           <input type="radio" name="{!wrap.fieldAPI}"  value="slave"/>
                                          <apex:inputHidden value="{!wrap.isSlaveChecked}" /> 
                                           </apex:outputPanel> -->
                                      </td> 
                                    
                         </tr>
                           </apex:repeat> 
                           
                    </tbody>
                </table>
            </apex:outputpanel>
            
             <apex:pageblock id="Readonly"  title="{!$Label.vehicle_Read_Only}" >
        
        <apex:panelGrid columns="2" width="1000px">
                <apex:pageblocksection columns="1" >
                
                  <apex:outputLabel value="{!$Label.masterLeadMerge}" style="padding-left:210px"></apex:outputLabel> 
                   <apex:repeat value="{!$ObjectType.Lead__c.FieldSets.LeadMergeReadonlyFieldsSet}" var="ci"> 
                       <apex:outputfield value="{!Master[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    
                     <apex:pageblocksection columns="1" >
                    <apex:outputLabel value="{!$Label.slaveLeadMerge}" style="padding-left:210px"></apex:outputLabel> 
                    <apex:repeat value="{!$ObjectType.Lead__c.FieldSets.LeadMergeReadonlyFieldsSet}" var="ci"> 
                       <apex:outputfield value="{!Slave[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    </apex:panelGrid>
         
      </apex:pageblock>
             <apex:pageblock id="Readonly1" title="{!$Label.vehicle_Details}" >
        
        <apex:panelGrid columns="2" width="1000px">
        <aPex:pageBlockSection columns="1">
                 <apex:pageblocksection columns="1" title="{!$Label.Interested_Vehicle_Details}" >
                <apex:outputField value="{!master.Interested_Vehicle__r.Brand__c}"/>
                  <apex:outputField value="{!master.Interested_Vehicle__r.Class__c}"/>
                  <apex:outputField value="{!master.Interested_Vehicle__r.Model_Description__c }"/>
                  <apex:outputField value="{!master.Interested_Vehicle__r.UsVIN__c}"/> 
                   </apex:pageblocksection>
                    <apex:pageblocksection columns="1" title="{!$Label.Interested_competitor_Vehicle_Details}" >
                  <apex:outputField value="{!master.Interested_Competitor_Vehicle__r.Brand__c}"/>
                  <apex:outputField value="{!master.Interested_Competitor_Vehicle__r.Class__c}"/>
                  <apex:outputField value="{!master.Interested_Competitor_Vehicle__r.Model_Description__c}"/>
                  <apex:outputField value="{!master.Interested_Competitor_Vehicle__r.UsVIN__c}"/>
                    </apex:pageblocksection>
                     <apex:pageblocksection columns="1" title="{!$Label.Current_Vehicle_Details}" >
                  <apex:outputField value="{!master.Current_Vehicle_1__r.Brand__c}"/>
                  <apex:outputField value="{!master.Current_Vehicle_1__r.Class__c}"/>
                  <apex:outputField value="{!master.Current_Vehicle_1__r.Model_Description__c}"/>
                  <apex:outputField value="{!master.Current_Vehicle_1__r.UsVIN__c}"/>
                   </apex:pageblocksection>
                    <apex:pageblocksection columns="1" title="{!$Label.Purchased_Vehicle_Details}" >
                  <apex:outputField value="{!master.Purchased_Vehicle__r.Brand__c}"/>
                  <apex:outputField value="{!master.Purchased_Vehicle__r.Class__c}"/>
                  <apex:outputField value="{!master.Purchased_Vehicle__r.Model_Description__c}"/>
                  <apex:outputField value="{!master.Purchased_Vehicle__r.UsVIN__c}"/>
                    
                    </apex:pageblocksection>
                    </aPex:pageBlockSection>
                     <aPex:pageBlockSection columns="1"> 
                 <apex:pageblocksection columns="1" title="{!$Label.Ch_Interested_Vehicle_Details}" >
                 <apex:outputField value="{!slave.Interested_Vehicle__r.Brand__c}"/>
                 <apex:outputField value="{!slave.Interested_Vehicle__r.Class__c}"/>
                 <apex:outputField value="{!slave.Interested_Vehicle__r.Model_Description__c }"/>
                 <apex:outputField value="{!slave.Interested_Vehicle__r.UsVIN__c}"/> 
                  </apex:pageblocksection>
                    <apex:pageblocksection columns="1" title="{!$Label.ch_Interested_competitor_Vehicle_Details}" >
                 <apex:outputField value="{!slave.Interested_Competitor_Vehicle__r.Brand__c}"/>
                 <apex:outputField value="{!slave.Interested_Competitor_Vehicle__r.Class__c}"/>
                 <apex:outputField value="{!slave.Interested_Competitor_Vehicle__r.Model_Description__c}"/>
                 <apex:outputField value="{!slave.Interested_Competitor_Vehicle__r.UsVIN__c}"/>
                  </apex:pageblocksection>
                     <apex:pageblocksection columns="1" title="{!$Label.ch_Current_Vehicle_Details}" >
                 <apex:outputField value="{!slave.Current_Vehicle_1__r.Brand__c}"/>
                 <apex:outputField value="{!slave.Current_Vehicle_1__r.Class__c}"/>
                 <apex:outputField value="{!slave.Current_Vehicle_1__r.Model_Description__c}"/>
                 <apex:outputField value="{!slave.Current_Vehicle_1__r.UsVIN__c}"/>
                  </apex:pageblocksection>
                    <apex:pageblocksection columns="1" title="{!$Label.ch_Purchased_Vehicle_Details}" >
                 <apex:outputField value="{!slave.Purchased_Vehicle__r.Brand__c}"/>
                 <apex:outputField value="{!slave.Purchased_Vehicle__r.Class__c}"/>
                 <apex:outputField value="{!slave.Purchased_Vehicle__r.Model_Description__c}"/>
                 <apex:outputField value="{!slave.Purchased_Vehicle__r.UsVIN__c}"/> 
                    </apex:pageblocksection>
                    </aPex:pageBlockSection>
                    </apex:panelGrid>
         
      </apex:pageblock>
        </apex:pageBlock>
    </apex:form>
</apex:page>
<apex:page controller="AccountMergeController" sidebar="false" showHeader="false">
    <style>
        .rollup td {
        padding: 5px;
        height:15px;
        text-align: left;
        valign: middle;
        border-bottom: 1px solid #BBB;
        }
        
        .headerRow td {
        padding-left:10px;
        font-weight:bold;
        }
        
        a {
        color: #015BA7;
        text-decoration: none;
        }
        
        body a:hover {
        text-decoration: underline;
        color: #015BA7;
        }
        hr.style2 {
      border-top: 3px double #8c8b8b;
       }
    </style>
    
    <apex:includeScript value="{!$Resource.jquery142}"/>
    <script>
    jquery = jQuery.noConflict();
    jquery(document).ready(function() {
        jquery('input[name*="CreatedDate"]').hide();
        jquery('input[name*="LastModifiedDate"]').hide();
        jquery('input[name*="LastModifiedById"]').hide();
        jquery('input[name*="CreatedById"]').hide();
        jquery('input[name*="Data_Source_Last_Modified_Date__c"]').hide();
        jquery('input[name*="MB_Customer_Info_Remove__c"]').hide();
        jquery('input[name*="MB_CIR_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Allow_Data_Sharing2__c"]').hide();
        jquery('input[name*="Sales_Sanction__c"]').hide();
        jquery('input[name*="Sales_Sanction_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Sales_Sanction_Comment__c"]').hide();
        jquery('input[name*="Mobile__c"]').hide();
        jquery('input[name*="Mobile_Status__c"]').hide();
        jquery('input[name*="SMS_Last_Modified_By__c"]').hide();
        jquery('input[name*="SMS_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Mobile2__c"]').hide();
        jquery('input[name*="SMS_MMS_IM_Status_2__c"]').hide();
        jquery('input[name*="SMS_Last_Modified_By2__c"]').hide();
        jquery('input[name*="SMS_Last_Modified_Date2__c"]').hide();
        jquery('input[name*="Individual_Home_Phone__c"]').hide();
        jquery('input[name*="Individual_Home_Phone_Status__c"]').hide();
        jquery('input[name*="Home_Phone_Last_Modified_By__c"]').hide();
        jquery('input[name*="Home_Phone_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Home_Phone_2__c"]').hide();
        jquery('input[name*="Home_Phone_Status_2__c"]').hide();
        jquery('input[name*="Home_Phone_Last_Modified_By2__c"]').hide();
        jquery('input[name*="Home_Phone_Last_Modified_Date2__c"]').hide();
        jquery('input[name*="Work_Phone__c"]').hide();
        jquery('input[name*="Work_Phone_Status__c"]').hide();
        jquery('input[name*="Work_Phone_Last_Modified_By__c"]').hide();
        jquery('input[name*="Work_Phone_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Work_Phone_Status_2__c"]').hide();
        jquery('input[name*="Work_Phone_Last_Modified_By2__c"]').hide();
        jquery('input[name*="Work_Phone_Last_Modified_Date2__c"]').hide();
        jquery('input[name*="Email__c"]').hide();
        jquery('input[name*="Email_Status__c"]').hide();
        jquery('input[name*="Email_Last_Modified_By__c"]').hide();
        jquery('input[name*="Email_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Email2__c"]').hide();
        jquery('input[name*="Email_Status_2__c"]').hide();
        jquery('input[name*="Email_Last_Modified_By2__c"]').hide();
        jquery('input[name*="Email_Last_Modified_Date2__c"]').hide();
        jquery('input[name*="Email3__c"]').hide();
        jquery('input[name*="Email_Status_3__c"]').hide();
        jquery('input[name*="Email_Last_Modified_By3__c"]').hide();
        jquery('input[name*="Email_Last_Modified_Date3__c"]').hide();
        jquery('input[name*="Fax"]').hide();
        jquery('input[name*="Fax_Validity__c"]').hide();
        jquery('input[name*="Fax_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Fax2__c"]').hide();
        jquery('input[name*="Fax_Validity2__c"]').hide();
        jquery('input[name*="Fax2_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Primary_Address_Reference__c"]').hide();
        jquery('input[name*="Primary_Address_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Primary_Phone__c"]').hide();
        jquery('input[name*="Primary_Phone_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Primary_Email__c"]').hide();
        jquery('input[name*="Primary_Email_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Primary_Fax__c"]').hide();
        jquery('input[name*="Primary_Fax_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Customer_LastUpdatedDate__c"]').hide();
        jquery('input[name*="Warranty_Apply_Status__c"]').hide();
        jquery('input[name*="Warranty_Apply_User__c"]').hide();
        jquery('input[name*="Warranty_Apply_Date__c"]').hide();
        jquery('input[name*="PersonDoNotCall_Last_Modified_Date__c"]').hide();
        jquery('input[name*="OptedOutOfEmail_Last_Modified_Date__c"]').hide();
        jquery('input[name*="OptedOutOfFax_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Postal_Opt_Out_Last_Modified_Date__c"]').hide();
        jquery('input[name*="Visit_Opt_Out_Last_Modified_Date__c"]').hide();
        jquery('input[name*="PersonDoNotCall"]').hide();
        jquery('input[name*="PersonHasOptedOutOfEmail"]').hide();
        jquery('input[name*="Postal_Opt_Out__c"]').hide();
        jquery('input[name*="Visit_Opt_Out__c"]').hide();
        jquery('input[name*="Opt_Out_Portal_Reason__c"]').hide();
        jquery('input[name*="Opt_In_Contact_Reason__c"]').hide();
        jquery('input[name*="Opt_In_Contact_Reason_Details__c"]').hide();
        jquery('input[name*="Phone"]').hide();
        jquery('input[name*="UCID__c"]').hide(); 
        jquery(':radio').change(function() {
            var name = jquery(this).attr('name');
            jquery('input[name=' + name + ']').each(function() {
                jquery(this).next().val(jquery(this).attr('checked'));
            });
        });
    });
    
    function setEntityValues (conid) {
        for (var frm = 0; frm < document.forms.length; frm++) {
            for (var fld = 0; fld < document.forms[frm].elements.length; fld++) {
                var elt = document.forms[frm].elements[fld];
                if (elt.type == "radio") {
                    if (elt.value == conid) {
                        elt.checked = true;
                    }
                }
            }
        }
    }
    </script>
    
    
    <style>
    /* This is for the full screen DIV */
    .popupBackground {
        /* Background color */
        background-color:black;
        opacity: 0.20;
        filter: alpha(opacity = 20);
    
        /* Dimensions */
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 998;
        position: absolute;
        
        /* Mouse */
        cursor:wait;
    }

    /* This is for the message DIV */
    .PopupPanel {
        /* Background color */
        border: solid 2px blue;
        background-color: white;

        /* Dimensions */
        left: 50%;
        width: 300px;
        margin-left: -100px;
        top: 50%;
        height: 50px;
        margin-top: -25px;
        z-index: 999;
        position: fixed;
        
        /* Mouse */
        cursor:pointer;
    }
</style>
    
    <apex:sectionHeader title="{!$Label.Account_Merge}" subtitle="{!$Label.Master_Account}: {!master.Name}"/>
    
    <apex:form id="forms">
        <apex:pageBlock id="pgBlckId" >
            <apex:pageMessages Id="message"/>            
            <apex:pageBlockButtons >
                <apex:commandButton value="{!$Label.Previous}" action="{!previous}" immediate="true"/>              
                <apex:commandButton action="{!mergeAccount}" value="{!$Label.Merge}" Id="save"  onclick="if (confirm('{!$Label.CP_Merge_Account_Confirm}')) return true; return false;" />
                                   
            </apex:pageBlockButtons>          
            <apex:outputpanel Id="detail"  >
            
                <table cellspacing="0" cellpadding="0" width="80%" align="center" class="rollup" style="margin-left:20px">
                    <tbody>
                       <tr class="headerRow">
                            <apex:actionFunction name="selectAll" action="{!selectAll}" reRender="message">
                                <apex:param assignTo="{!selectAllParam}" name="selectAllParam" value=""/>
                            </apex:actionFunction>
                            <td style="width:20%"></td>
                            <td style="width:40%">
                                <apex:outputLink target="_blank" value="/{!master.Id}">{!master.Name}
                                </apex:outputLink> 
                              <!--  <a href="javascript:setEntityValues('master'); selectAll('master');">{!$Label.Select_All}</a>-->
                            </td>
                            
                            <td style="width:40%">
                                <apex:outputLink target="_blank" value="/{!slave.Id}">{!slave.Name}
                                </apex:outputLink>  
                              <!--  <a href="javascript:setEntityValues('slave'); selectAll('slave');">{!$Label.Select_All}</a>-->
                            </td>
                        </tr>
                        
                        <apex:repeat var="wrap" value="{!wraps}" >
                            <tr onmouseover="if (window.hiOn){hiOn(this);}" onmouseout="if (window.hiOff){hiOff(this);}" 
                                onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}" >
                                
                                <td style="text-align:right; width:20%; background-color: {!IF(wrap.isSame,  '#EEEEEE', '#C2E4FE')};">
                                    <b>{!wrap.fieldLabel}</b>
                                </td>
                                
                                <td style="width:40%">
                                    <apex:outputField value="{!master[wrap.fieldAPI]}" rendered="{!wrap.isSame}"/>
                                    <apex:outputPanel rendered="{!NOT(wrap.isMasterNull) && NOT(wrap.isSame)}">
                                       <apex:outputpanel rendered="{!wrap.isMasterChecked}">
                                            <input type="radio" name="{!wrap.fieldAPI}" checked="checked" value="master"/>
                                            <apex:inputHidden value="{!wrap.isMasterChecked}" />
                                        </apex:outputpanel>
                                        
                                        <apex:outputpanel rendered="{!NOT(wrap.isMasterChecked)}">
                                            <input type="radio" name="{!wrap.fieldAPI}" checked="checked" value="master"/>
                                            <apex:inputHidden value="{!wrap.isMasterChecked}" />
                                        </apex:outputpanel>
                                        
                                       <apex:outputField value="{!master[wrap.fieldAPI]}" />
                                    </apex:outputPanel>
                                </td>
                                
                                <td style="width:40%">
                                    <apex:outputField value="{!slave[wrap.fieldAPI]}" rendered="{!wrap.isSame}"/>
                                    <apex:outputPanel rendered="{!NOT(wrap.isSlaveNull) && NOT(wrap.isSame)}">
                                        <apex:outputpanel rendered="{!wrap.isSlaveChecked}">
                                            <input type="radio" name="{!wrap.fieldAPI}" checked="checked" value="slave"/>
                                            <apex:inputHidden value="{!wrap.isSlaveChecked}" />
                                        </apex:outputpanel>
                                        
                                        <apex:outputpanel rendered="{!NOT(wrap.isSlaveChecked)}">
                                            <input type="radio" name="{!wrap.fieldAPI}"   value="slave"/>
                                            <apex:inputHidden value="{!wrap.isSlaveChecked}" />
                                        </apex:outputpanel>
                                        
                                        <apex:outputField value="{!slave[wrap.fieldAPI]}" />
                                    </apex:outputPanel>
                                </td>         
                            </tr>
                        </apex:repeat> 
                       
                    </tbody>
                </table>
            </apex:outputpanel>
            
             <apex:pageblock id="Readonly" rendered="{!if(recAcc.recordtype.Name = "Person Account",true,false)}">
        
        <apex:panelGrid columns="2" width="1000px">
                <apex:pageblocksection columns="1" >
                   <apex:repeat value="{!$ObjectType.Account.FieldSets.AccountMergeReadonlyPerson}" var="ci"> 
                       <apex:outputfield value="{!Master[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    
                     <apex:pageblocksection columns="1" >
                    <apex:repeat value="{!$ObjectType.Account.FieldSets.AccountMergeReadonlyPerson}" var="ci"> 
                       <apex:outputfield value="{!Slave[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    </apex:panelGrid>
         
      </apex:pageblock>
      
        <apex:pageblock id="Readonly1" rendered="{!if(recAcc.recordtype.Name = "Company",true,false)}">
        
        <apex:panelGrid columns="2" width="1000px">
                <apex:pageblocksection columns="1" >
                   <apex:repeat value="{!$ObjectType.Account.FieldSets.AccountMergeReadonlyCompany}" var="ci"> 
                       <apex:outputfield value="{!Master[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    
                     <apex:pageblocksection columns="1" >
                    <apex:repeat value="{!$ObjectType.Account.FieldSets.AccountMergeReadonlyCompany}" var="ci"> 
                       <apex:outputfield value="{!Slave[ci]}" /> 
                   </apex:repeat>
                    </apex:pageblocksection>
                    </apex:panelGrid>
         
      </apex:pageblock>
            
        </apex:pageBlock>
         </apex:form>
                  <apex:form id="addresss">
         <apex:pageBlock title="{!$Label.Address_Select}" Id="pageBlock">
                
                
                <apex:pageBlockSection >
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="{!$Label.Select_Address_Msg}" />
                        <apex:actionRegion >

                        <apex:selectList id="slectaddtype" multiselect="false" value="{!selectedAddress}" size="1" >
                            <apex:selectOptions value="{!addtype}"/>
                           <apex:actionSupport event="onchange" reRender="messages,addfrm,addresss"  action="{!displayAddress}" status="Loading....."  />
                             
                        </apex:selectList>
                        </apex:actionRegion>

                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
                
                 
                </apex:pageBlock> 
                
                <apex:pageMessages Id="messages"/> 
                 <apex:pageBlock id="addressblock" rendered="{!if(hasSuspectAdds = true,true,false)}">
                  
                   <apex:outputPanel id="addfrm">
                      <table cellspacing="0" cellpadding="0" width="80%" align="center" class="rollup" style="margin-left:20px">
                    <tbody>
                        <apex:repeat var="wrap1" value="{!wraps1}" >
                     
                            <tr onmouseover="if (window.hiOn){hiOn(this);}" onmouseout="if (window.hiOff){hiOff(this);}" 
                                onfocus="if (window.hiOn){hiOn(this);}" onblur="if (window.hiOff){hiOff(this);}">
                                
                                <td style="text-align:right; width:20%; background-color:#EEEEEE;">
                                    <b>{!wrap1.fieldLabel}</b>
                                </td>
                                
                                <td style="width:40%;">
                                   
                                       <apex:outputField value="{!MasterAddresses[wrap1.fieldAPI1]}" />
                                    
                                </td>
                                
                                <td style="width:40%;">
                                      <apex:outputField value="{!SlaveAddresses[wrap1.fieldAPI1]}" />
                                </td>         
                            </tr>
                        </apex:repeat>  
                       
                    </tbody>
                </table>
          
                    
                 
                   </apex:outputPanel>
           
                 
                 
                 </apex:pageBlock>
                 
           
    </apex:form>
</apex:page>
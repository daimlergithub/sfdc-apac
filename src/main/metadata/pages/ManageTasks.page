<!---Created by :Saranya Gotrala SFDCKR-1557-->
<apex:page standardController="Task" extensions="ManageTasks" sidebar="false" showHeader="false" id="page1" >
   <script language="javascript">
   function RelodeParent(){
      
      window.opener.location.href="{!URLFOR($Site.Prefix)}/{!$CurrentPage.parameters.CampaignId}";          
      window.top.close();

   }
    function checkAll(cb){
        
       var inputElem = document.getElementsByTagName("input");
       
       
        for (var i = 0; i < inputElem.length; i++) {
            if (inputElem[i].id.indexOf("checkedone") != -1) {
                inputElem[i].checked = cb.checked;
                
            }
        };
        
        document.getElementById('page1:form1:hdn').value='trues';
      }
        function javascc(index) {
        
        var firstname1 = document.getElementById('page1:form1:pb1:tab:'+index+':statss').innerHTML;
         
         var res = firstname1.split("</span>");
        
        }
      
    
       function closeWin() {
          window.opener.location.href="{!URLFOR($Site.Prefix)}/{!$CurrentPage.parameters.campid}";
          window.top.close();
        }
</script>
<apex:form id="form1">
<apex:inputHidden value="{!statusvalfp}" id="hdn"/>
<apex:pageMessages />
<apex:variable value="{!0}" var="index"/>
<apex:pageBlock id="pb1" title="{!$Label.Manage_Tasks}">
<apex:pageBlockSection collapsible="false" columns="7" id="pds1">
<apex:selectList size="1" value="{!oldstatus}"  label="{!$Label.Filter_Status} ">
                    <apex:selectOptions value="{!oldstatuses}"/>
                    <apex:actionSupport event="onchange" action="{!dropDown}" reRender="a,tab" status="myStatus2"/>
                    
 </apex:selectList>
 <apex:actionStatus id="myStatus2" startText="Please Wait..."  />
<apex:selectList size="1" value="{!newstatus}" id="a" label="{!$Label.New_Status} ">
<apex:selectOptions value="{!Changingstatus}" />
</apex:selectList>
</apex:pageBlockSection>
<apex:outputPanel >
<apex:pageBlockTable value="{!taskselect}" var="tasksel" id="tab">
             <apex:column >
                <apex:facet name="header"> 
                    <!--<apex:inputCheckbox onclick="checkAll(this)" id="check">Select All</apex:inputCheckbox>  onclick="javascc({!index});"-->
                    <input type='Checkbox' onclick="checkAll(this)" id="check" class="checkbox class">{!$Label.Select_All}</input>
                </apex:facet>
                <apex:inputCheckbox value="{!tasksel.isSelected}"  id="checkedone" styleClass="checkstatus"/>
                <apex:variable value="{!index + 1}" var="index" id="rowid"/>
            </apex:column>
            <apex:column value="{!tasksel.taskselects.Subject}" headerValue="Subject"/>
            <apex:column value="{!tasksel.taskselects.Who.name}" headerValue="Name"/>
            <apex:column value="{!tasksel.taskselects.ActivityDate}" headerValue="Due Date"/>
            <apex:column value="{!tasksel.taskselects.Owner.name}" headerValue="Assigned To"/>
            <apex:column value="{!tasksel.taskselects.status}" headerValue="Status" id="statss"/>
</apex:pageBlockTable>
</apex:outputPanel>
<apex:pageBlockButtons location="bottom" >
           <apex:commandButton value="Submit" action="{!Changestatus}" oncomplete="closeWin();"/>
</apex:pageBlockButtons>
</apex:pageBlock>
</apex:form>

</apex:page>
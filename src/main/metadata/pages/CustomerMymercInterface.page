<!-----------------------------------------------
    lastModifiedBy : Lokesh 
    modifiedDate   : 23rd Mar, 2017
    JIRA           : SFDCJP-2000,SFDCJP-2100
------------------------------------------------>

<apex:page standardController="Account" extensions="CustomerMymercInterfaceController" id="page">
<apex:includeScript value="{!$Resource.jQuery}" />
<script type = "text/javascript">
function CustAlrtMsg()
{
   var valu=document.getElementById('page:form:a:pbs:pbt:0:inptid').value;
   var emailval=document.getElementById('page:form:a:pbs:pbt:0:inputemailid').value;
    if(valu == '')
    {

    <!--if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}'));-->
    var answer=confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}');
    if(answer ==true)
    {
        document.getElementById('page:form:hid').value = true;
         document.getElementById('page:form:canid').value = true;
    }
   if(answer ==false)
    {
       document.getElementById('page:form:hid').value = false;
        document.getElementById('page:form:canid').value = false;
   }
  }
   else if(valu != '')
    {
      
        var answer1=confirm('{!$Label.Did_You_Get_Agreement_From_Customer}');
    if(answer1 ==true)
    {
        document.getElementById('page:form:hid').value = true;
    }
   if(answer1 ==false)
    {
       document.getElementById('page:form:hid').value = false;
   }
    }
 }
  </script>
    
    <apex:form id="form">
    <apex:inputHidden value="{!cancelpop}" id="hid"/>
      <apex:inputHidden value="{!okcancelpop}" id="canid"/>
               <apex:pagemessages ></apex:pagemessages>
        
        <apex:pageBlock title="{!$Label.Customer_My_Mercedes_Interface_Customer}" id="a"><br/>
             <apex:OutputLabel > {!$Label.Please_set_all_information_received_from_a_customer} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Mobile_is_a_mandatory_for_Concierge_Service} </apex:OutputLabel> <br/><br/>
             <apex:OutputLabel > {!$Label.What_information_a_user_can_use_for_login_will_depend_on_input_information} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Email_A_customer_will_be_able_to_use_the_email_for_login} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Mobile_A_customer_will_be_able_to_use_the_mobile_for_login} </apex:OutputLabel> <br/>
             <apex:OutputLabel > {!$Label.Login_Email_Mobile_A_customer_will_be_able_to_use_the_mobile_for_login} </apex:OutputLabel> <br/><br/>
         
              <apex:pageblockButtons location="bottom">
                 <apex:commandButton action="{!mymercnew}" value="{!$Label.MyMercedes_New_Registration}" disabled="{!MyMercVar}" onclick="CustAlrtMsg()"/>
             <!-- <apex:commandButton action="{!mymercnew}" value="{!$Label.MyMercedes_New_Registration}" disabled="{!MyMercVar}" onclick="(if(!loginmobile=='',if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}')){return false};,if(!confirm('{!$Label.Did_You_Get_Agreement_From_Customer}')){return false};))" /> --->
                 <apex:commandButton action="{!savepop}" value="{!$Label.MyMercedes_Email_ID_Edit}" disabled="{!MyMercEmailVar}"   Onclick="if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}')){return false};"/><!-- oncomplete="myfunction();"/>-->
                 <apex:commandButton action="{!createContractSector}" value="{!$Label.Create_ContactSector}" disabled="{!ContactSectorvar}" Onclick="if(!confirm('{!$Label.Did_you_Get_Agreement_From_Customer_Login_Mobile_is_a_mandatory_for_Concierge_S}')){return false};"/>
                 <apex:commandButton action="{!MercedesmeDeletion}" value="{!$Label.Mercedes_me_Deletion}" disabled="{!loginmobileButton}" Onclick="if(!confirm('{!$Label.Are_you_sure_to_delete_this_account_mym}')){return false};"/>  
                 <apex:commandButton action="{!cancel}" value="{!$Label.Cancel}"/>
              </apex:pageblockButtons>
                  
                <apex:pageBlockSection title="{!$Label.Select_Your_Prefered_Email_Id_For_Customer}" columns="1" id="pbs">
                    <apex:pageblockTable value="{!accl[0]}" var="ac" id="pbt">
                        <apex:column value="{!ac.toRole__c}" headerValue="{!$Label.AccountName}"/>
                        <apex:column headerValue="{!$Label.My_Mercedes_ID}" value="{!myMercId}"/>
                        <apex:column headerValue="{!$Label.My_Mercedes_Email_Id}">
                        <apex:inputText id="inputemailid" value="{!MyMercEmail}" rendered="{!IF(myMercId == null, true, false)}" />
                        <apex:outputText value="{!MyMercEmail}" rendered="{!IF(myMercId != null, true, false)}" />
                        </apex:column>
                        <apex:column headerValue="{!$Label.Login_Mobile}" id="inputid">
                         <apex:inputText id="inptid" value="{!loginmobile}" rendered="{!IF(myMercId == null, true, false)}" />
                        <apex:outputText value="{!loginmobile}" rendered="{!IF(myMercId != null, true, false)}" />
                        </apex:column> 
                       
                        <apex:column >
                            <apex:commandLink value="{!$Label.Emails}" action="{!showPopup}" >
                                 <apex:param name="recordID" value="{!ac.ID}"/>
                            </apex:commandLink>
                        </apex:column>
                        
                        <apex:column headerValue="{!$Label.Outlet_Registered_To_MyMercedes}" value="{!RegOutlet}"/>
                    </apex:pageblockTable>
                    <apex:outputPanel id="one">
                        <apex:repeat value="{!aLink}" var="eachWrap">
                            <apex:outputPanel id="popup">
                                <apex:outputPanel styleClass="popupBg" layout="block" rendered="{!displayPopUp}"/>
                                <apex:outputPanel styleClass="popup" layout="block" rendered="{!displayPopUp}">
                                    <apex:pageblockSection columns="1" >
                                       <table width="100%">
                                           <tr>
                                               <td width="25">
                                                   <apex:outputtext value="{!eachWrap.toRole__r.Email__c}" label="{!$Label.Email}" />
                                               </td>
                                           </tr>
                                           <tr>
                                               <td width="25">
                                                     <apex:outputtext value="{!eachWrap.toRole__r.Email2__c}" label="{!$Label.Email2}" />
                                               </td>
                                           </tr>
                                       </table>
                                    </apex:pageblockSection>
                                        <!--<apex:commandButton value="Save" action="{!savepop}"/>-->
                                        <apex:commandButton value="{!$Label.CloseMym}" action="{!closePopup}" rerender="one"/>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:repeat>
                    </apex:outputPanel>
                </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
    
    <script>
        function myfunction()
        {
        var alrt = '{!($Label.Records_Updated)}';
        alert(alrt);
        }
    </script>
      <style type="text/css">

        .popup
        {
            background-color: white;
            border-width: 1px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            padding:10px;
            position: absolute;
            width: 500px;
            margin-left: -250px;
            top:80px;
        }

        .popupBg
        {
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 70);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;f
            left: 0;
            z-index: 9998;
            
        }

    </style>
</apex:page>